<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/genralPages.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Transfusion Calculator</title>
    <script src="https://kit.fontawesome.com/834304401a.js" crossorigin="anonymous"></script>
    <script src="/script.js"></script>
    <style>
      body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 16px;
        font-weight: bold;
        line-height: 2;
        color: #333;
        background-image: url("/images/bloodTestGuides.svg");
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
      }
      h1 {
        text-align: center;
      }
      form {
        margin: 0 auto;
        max-width: 600px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
      }
      label {
        display: block;
        margin-bottom: 10px;
      }
      input[type="number"] {
        display: block;
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f8f8f8;
      }
      button {
        margin-top: 20px;
        padding: 10px;
        border-radius: 5px;
        background-color: #4CAF50;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }
      button:hover {
        background-color: #3e8e41;
      }
      #transfusion-result {
        font-size: 24px;
        text-align: center;
        margin-top: 20px;
      }
    </style>
  </head>
  <header>
    <nav class="logo-container">
      <div class="logo-container">
        <h1 class="main-header">Blood Transfusion Calculator</h1>
        <div class="navbar-icons">
          <a href="/index.html" title="Home"><i class="fa-solid fa-house" alt="House icon"></i></a>
        </div>
        <button class="back-button" onclick="goBack()">Back</button>
      </div>
    </nav>
  </header>
  <body class="vitals-page">
    <h1>Blood Transfusion Calculator</h1>
    <p>This calculator helps to determine the number of blood transfusion units required based on the current hemoglobin level and assuming that we attempt to get the Hb in the emergency department to at least 9 g/dl</p>
    <form>
      <label for="hb-level">Enter Current Hemoglobin Level(g/dl):<br> <span style="color: brown; font-size:smaller">If your Hb is in different units, kindly convert to g/dl.</span></label>
      <input type="number" id="hb-level" name="hb-level" min="0" max="20" step="0.1">
      <br>
      <button type="button" onclick="calculateTransfusion()">Calculate Units</button>
      <br>
      <h2>Transfusion Recommendation</h2>
      <p id="transfusion-result"></p>
    </form>

 
<section>
  <h2>Platelet Transfusion</h2>
  <p><strong>Indications:</strong> Used in patients with thrombocytopenia or platelet dysfunction. Commonly indicated for counts <10x10^9/L in asymptomatic patients, <20x10^9/L in febrile patients, or <50x10^9/L in actively bleeding patients or pre-surgery.</p>
  <p><strong>Precautions:</strong> Ensure correct blood type match, monitor for transfusion reactions. Use cautiously in patients with a history of transfusion reactions.</p>
  <p><strong>Administration:</strong> Administered intravenously. Dosage and rate depend on the patient's condition and platelet count.</p>
  <p><em>Note: Administer only under senior authorization.</em></p>
</section>


<section>
  <h2>Fresh Frozen Plasma (FFP)</h2>
  <p><strong>Indications:</strong> Used to treat bleeding caused by clotting factor deficiencies, in liver disease, massive transfusions, or warfarin reversal.</p>
  <p><strong>Precautions:</strong> Risk of volume overload, allergic reactions, and transfusion-related acute lung injury (TRALI). Monitor patient closely.</p>
  <p><strong>Administration:</strong> Administered intravenously. Dosage based on patient’s weight and clinical condition.</p>
  <p><em>Note: Administer only under senior authorization.</em></p>
</section>


<section>
  <h2>Cryoprecipitate Transfusion</h2>
  <p><strong>Indications:</strong> Used for managing bleeding in patients with low fibrinogen levels, Hemophilia A, von Willebrand disease, and DIC.</p>
  <p><strong>Precautions:</strong> Risk of viral transmission, allergic reactions, and TRALI. Appropriate cross-matching is required.</p>
  <p><strong>Administration:</strong> Administered intravenously. Dosage depends on fibrinogen level and patient’s clinical condition.</p>
  <p><em>Note: Administer only under senior authorization.</em></p>
</section>


<section>
  <h2>Factor 8 or 9 for Hemophiliac Patients</h2>
  <p><strong>Indications:</strong> Used in patients with Hemophilia A (Factor VIII deficiency) or Hemophilia B (Factor IX deficiency) for bleeding episodes or prophylaxis.</p>
  <p><strong>Precautions:</strong> Monitor for development of inhibitors, allergic reactions, and thrombotic events.</p>
  <p><strong>Administration:</strong> Administered intravenously. Dosage depends on the severity of deficiency, extent of bleeding, and patient’s body weight.</p>
  <p><em>Note: Administer only under senior authorization.</em></p>
</section>




 
    <script>
        function calculateTransfusion() {
          const hbLevel = parseFloat(document.getElementById("hb-level").value);
          const rawUnitsRequired = (9 - hbLevel) / 1.5;
          const fractionalPart = rawUnitsRequired % 1;
          let unitsRequired;
      
          // Apply rounding rules
          if (fractionalPart >= 0.01 && fractionalPart <= 0.5) {
            unitsRequired = Math.floor(rawUnitsRequired); // Round down
          } else if (fractionalPart >= 0.51 && fractionalPart <= 0.99) {
            unitsRequired = Math.ceil(rawUnitsRequired); // Round up
          } else {
            unitsRequired = Math.round(rawUnitsRequired); // Normal rounding for whole numbers
          }
      
          let resultMessage = '';
          if (unitsRequired < 1) {
            resultMessage = "Your patient does not require transfusion. Please consult with a senior if you feel that it is needed.";
          } else if (unitsRequired <= 3) {
            resultMessage = `Your patient requires ${unitsRequired} unit(s) of blood transfusion.`;
          } else {
            resultMessage = `Your patient requires ${unitsRequired} unit(s) of blood transfusion, but needs to be managed as per your department's massive transfusion protocol. You can also use our protocol by clicking on this link: <a href='https://drive.google.com/file/d/1FUIEcxcjk8abjyOx8aQKM_NZUz28-mSh/view?usp=sharing' target='_blank'>Protocol Link</a>`;
            ;
          }
      
          document.getElementById("transfusion-result").innerHTML = resultMessage;
        }

       
      </script>
      
  </body>
</html>
